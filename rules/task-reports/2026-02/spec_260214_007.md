# Post-005 End-to-End Smoke Regression Spec (Task 260214_007)

**Goal**: Verify core service health and News Pipeline (Pull/Store) integrity after Milestone 005.

## 1. Service Health
- **Endpoint**: `http://localhost:53122/`
  - **Expectation**: HTTP 200, Body "OK"
- **Endpoint**: `http://localhost:53122/pairs`
  - **Expectation**: HTTP 200, Body "OK"

## 2. News Pull Chain (GET /news/pull)
- **Limit Clamp**:
  - `limit=2` -> Returns 2 items.
  - `limit=20` -> Returns 20 items.
  - `limit=9999` -> Returns 50 items (Clamped).
- **Pagination (since_id)**:
  - Fetch Page 1 (limit=5).
  - Use `latest_news_id` (or max ID) as `since_id` for Page 2.
  - Verify Page 2 returns new items or empty (convergence).
- **Idempotency**:
  - Call `limit=5` twice with same params.
  - Verify Response Body SHA256 matches exactly.

## 3. News Store Persistence & Deduplication
- **Persistence**:
  - After Pull, call `GET /news`.
  - Verify `count` > 0 and `items` are present.
- **Deduplication**:
  - Trigger Pull again (same params).
  - Verify `deduped_count` > 0 in Pull response.
  - Verify `GET /news` count did not blindly double.

## 4. Execution Protocol
- **Fail-Fast**: Stop on first failure.
- **Evidence**:
  - All HTTP interactions saved via `curl.exe --output`.
  - Log file `260214_007_smoke_log.txt` tracks steps.
  - `GATE_LIGHT_EXIT=0` mandatory.
